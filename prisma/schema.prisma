// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Camper {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  email      String? @unique
  camperId   String? @unique
  discordId  String? @unique
  firebaseId String? @unique
  citizenId  String? @unique

  firstName   String?
  firstNameEn String?
  lastName    String?
  lastNameEn  String?
  nickname    String?
  telephone   String?
  branch      BranchType?
  points      Int?        @default(0)

  province        String?
  shirtSize       String?
  educationLevel  String?
  educationSchool String?

  emergencyFirstName    String?
  emergencyLastName     String?
  emergencyTelephone    String?
  emergencyRelationship String?

  parentFirstName    String?
  parentLastName     String?
  parentTelephone    String?
  parentRelationship String?

  healthAllergicDrug       String?
  healthAllergicThing      String?
  healthCongenitalDisease  String?
  healthDietaryRestriction String?
  healthDrug               String?

  Team   Team?   @relation(fields: [teamId], references: [id])
  teamId String? @db.Uuid
}

model Team {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  name    String
  campers Camper[]
}

enum BranchType {
  PROGRAMMING
  MARKETING
  CONTENT
  DESIGN
}
